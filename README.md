# ะขะตััะพะฒะพะต VK

ะัะพะตะบั ัะพะฑะธัะฐะตั ะดะฐะฝะฝัะต ั [JSONPlaceholder](https://jsonplaceholder.typicode.com/posts), ัะพััะฐะฝัะตั ะธั ะฒ PostgreSQL, ะฐะณัะตะณะธััะตั ะบะพะปะธัะตััะฒะพ ะฟะพััะพะฒ ะฝะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะธ ะพัะพะฑัะฐะถะฐะตั ัะพะฟ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ัะตัะตะท ะฒะตะฑ-ะดะฐัะฑะพัะด.

---

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

๐ฆ `vk/`  
โโ ๐ `infra/`  
โ  โโ ๐ `docker-compose.yml`  
โ  โโ ๐ `Dockerfile`  
โ  โโ ๐ `.env`  
โ  โโ ๐ `scripts/`  
โ     โโ ๐ `extract.py`  
โ     โโ ๐ `transform.py`  
โ     โโ ๐ `dashboard.py`  
|     โโ ๐ `test_transform.py`
โโ ๐ `run.sh`  
โโ ๐ `Makefile`
โโ ๐ `README.md`


## ะขัะตะฑะพะฒะฐะฝะธั

- Docker ะธ Docker Compose
- Python 3.12 (ะดะปั ะปะพะบะฐะปัะฝะพะณะพ ะทะฐะฟััะบะฐ ะธ ัะตััะพะฒ)
- ะะฐะทะฐ ะดะฐะฝะฝัั PostgreSQL (ะฟะพะดะฝะธะผะฐะตััั ัะตัะตะท Docker)


# ะะฝััััะบัะธั ะฟะพ ะทะฐะฟััะบั ะฟัะธะปะพะถะตะฝะธั

1. **ะัะตะดะฒะฐัะธัะตะปัะฝะพ ัััะฐะฝะพะฒะธัะต Docker** ะดะปั ะฒะฐัะตะน ัะธััะตะผั.

2. **ะกะบะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน**:

   ```bash
   git clone <URL_ัะตะฟะพะทะธัะพัะธั>
   cd <ะฝะฐะทะฒะฐะฝะธะต_ะฟะฐะฟะบะธ_ั_ัะตะฟะพะทะธัะพัะธะตะผ>
   ```

3. **ะกะพะทะดะฐะนัะต ะธ ะฐะบัะธะฒะธััะนัะต ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต**:

   - **ะะปั Mac ะธะปะธ Linux**:
     ```bash
     python3 -m venv env
     source env/bin/activate
     ```

   - **ะะปั Windows**:
     ```bash
     python -m venv venv
     venv\Scripts\activate
     ```

4. **ะ ะบะพัะฝะต ะฟัะพะตะบัะฐ ะฒัะฟะพะปะฝะธัะต**:

    ```bash
    chmod +x run.sh
    ./run.sh
    ```

## ะงัะพ ะดะตะปะฐะตั ัะบัะธะฟั?

1. ะะพะดะฝะธะผะฐะตั ะบะพะฝัะตะนะฝะตัั 

2. ะะดัั 10 ัะตะบัะฝะด ะฟะพะบะฐ ะะ ะณะพัะพะฒะฐ

3. ะะฐะฟััะบะฐะตั extract.py โ transform.py

4. ะัะฒะพะดะธั ัะพะฟ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฒ ะบะพะฝัะพะปั ะธ ะผะพะถะฝะพ ะฟะพัะผะพััะตัั ัะตะทัะปััะฐั ะฟะพ ะฐะดัะตัั: [http://localhost:8000/top](http://localhost:8000/top)

### ะัะธะผะตั SQL-ะทะฐะฟัะพัะฐ ะดะปั ะฒัะฑะพัะบะธ ะธะท ะธัะพะณะพะฒะพะน ัะฐะฑะปะธัั `top_users_by_posts`

```sql
SELECT user_id, posts_cnt, calculated_at
FROM top_users_by_posts
ORDER BY posts_cnt DESC;
```

### ะะฐะฟััะบ ัะตััะฐ
   ```bash
   make test
   ```